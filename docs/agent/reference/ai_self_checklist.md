# AI Agentic Workflow Self-Checklist (Quality Assurance Protocol)

このチェックリストは、AIエージェントが成果物（PRD、計画書、コード、ルール更新）を生成した直後に、その品質と整合性を自己評価するためのものである。各フェーズの出力前にこのリストを参照し、基準を満たしていない場合は修正を行うこと。

## 1. Foundation: PRD (Product Requirement Document) 品質チェック
*プロジェクトの「北極星」として機能する十分な具体性があるか？*

- [ ] **明確なスコープ定義**: "In-Scope"（やること）だけでなく、"Out-of-Scope"（やらないこと）が明記されているか？
- [ ] **粒度の適正化**: 実装タスクが、1回のプロンプトやコーディングサイクルで完結可能なサイズ（例: APIエンドポイント単位、コンポーネント単位）に分解されているか？
- [ ] **技術的制約の明示**: 使用する技術スタック、アーキテクチャパターン、既存コードベースとの整合性が定義されているか？
- [ ] **単一情報源（SSOT）**: プロジェクトの目的（Mission）とゴールが、このドキュメント単体で誤解なく伝わるか？

## 2. Context Management: コンテキスト効率性チェック
*LLMのコンテキストウィンドウを無駄遣いせず、必要な情報のみを参照しているか？*

- [ ] **モジュラー参照**: 現在のタスク（例: フロントエンド実装）に関係のないルールやドキュメント（例: バックエンドのデプロイ手順）をコンテキストから除外できているか？
- [ ] **ルールの軽量化**: グローバルルールファイル（`.md`）は200行未満等の軽量な状態を維持し、詳細は参照ドキュメントに委譲しているか？
- [ ] **依存関係の明確化**: 必要なライブラリや外部依存関係が、暗黙知ではなく明示的にドキュメント内で参照されているか？

## 3. Pre-Execution: 実行計画書（Structured Plan）チェック
*コンテキストリセット後も、このドキュメントだけで実装が可能か？*

- [ ] **コンテキストの自立性 (Context Independence)**: 過去のチャット履歴（会話の流れ）を知らない「記憶喪失」の状態でも、この計画書だけでタスクを完遂できる情報が含まれているか？
- [ ] **テスト戦略の包含**: 実装だけでなく、検証方法（テストコード作成、手動確認手順）が含まれているか？
- [ ] **ファイルパスの明記**: 編集・作成すべきファイルのパスが具体的かつ正確に記載されているか？

## 4. Standardization: ワークフロー標準化（Commandify）チェック
*この作業は再利用可能な資産（コマンド）に変換すべきか？*

- [ ] **反復性の検知**: 今回行った一連の指示や手順は、今後2回以上繰り返される可能性があるか？（Yesならコマンド化を提案せよ）
- [ ] **プロセスの一貫性**: 既存のコマンド（`/test`, `/commit` など）がある場合、それを利用するフローになっているか？
- [ ] **ドキュメント化**: 新しい手順が発生した場合、それは個人の暗黙知ではなく、Markdownドキュメントとして形式知化されているか？

## 5. System Evolution: システム進化（再発防止）チェック
*バグやエラー修正時、コードだけでなく「仕組み」を直したか？*

- [ ] **根本原因分析**: エラーの原因は、コードのミスか？それとも指示（プロンプト/ルール）の曖昧さか？
- [ ] **ルールの更新**: 同様のエラーを二度と起こさないために、グローバルルールや参照ドキュメントに追加すべき「禁止事項」や「推奨パターン」はあるか？
- [ ] **プロセスの改善**: 計画フェーズや検証フェーズのチェック項目に不足はなかったか？あればテンプレートを更新する提案を含めているか？

---
**Instruction for AI:**
成果物をユーザーに提示する前に、上記項目をバックグラウンドで確認し、不備がある場合は自動的に補正案を作成してください。